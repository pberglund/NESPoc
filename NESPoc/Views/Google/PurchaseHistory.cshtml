@{
    ViewBag.Title = "Purchase History";
}

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script src="~/Scripts/GoogleHelpers.js"></script>
<script type="text/javascript">

    var barChart = null;
    var lineChart = null;
    var lineDataVals = [];
    

    // Load the Visualization API and the corechart package.
    google.charts.load('current', { 'packages': ['corechart'] });

    // Set a callback to run when the Google Visualization API is loaded.
    google.charts.setOnLoadCallback(drawChart);

    // Callback that creates and populates a data table,
    // instantiates the pie chart, passes in the data and
    // draws it.
    function drawChart() {

        
        var options = {
            'title': 'Declining Sales',
            'width': 500,
            'height': 500,
            legend: { position: 'bottom' },
            trendlines: {
                0: {
                color: 'black',
                }
            },
            hAxis: {
                title: 'Years',
                slantedText: true,
                slantedTextAngle: 45,
                textStyle: {
                    fontSize: 10
                },
                format: 'yyyy'
            },
        };

        var years = [2010, 2011, 2012, 2013, 2014, 2015, 2016];

        var data = new google.visualization.DataTable();


        data.addColumn('date', 'Year');
        data.addColumn('number', 'Value');
        
        for (var i = 0; i < years.length; i++) {

            var yearDate = new Date(years[i], 1, 1);

            lineDataVals.push([yearDate, randomData()]);
        }

        data.addRows(lineDataVals);
        var dateFormatter = new google.visualization.NumberFormat({
            pattern: 'yyyy'
        });
        dateFormatter.format(data, 0);

        configureChart(lineChart, 'line_chart_div', 'LineChart', data, options, 'updateLineChart', function (chart) { randomizePointOnChart(chart, data, options, 100); });
        options.isStacked = true;
        options.orientation = "horizontal";
        configureChart(barChart, 'bar_chart_div', 'BarChart', data, options, 'updateBarChart', function (chart) { randomizePointOnChart(chart, data, options, 100); });

    }


</script>

<div class="row">
    <div class="col-md-6">
        <h3>Line Chart - yearly purchases by year</h3>
        <div id="line_chart_div"></div>
        <a class="btn" id="updateLineChart">Update</a>
    </div>
    <div class="col-md-6">
        <h3>Bar Chart - yearly purchases by year</h3>
        <div id="bar_chart_div"></div>
        <a class="btn" id="updateBarChart">Update</a>
    </div>
</div>