<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script src="~/Scripts/GoogleHelpers.js"></script>
<script type="text/javascript">

    var barObj = null;
    var lineObj = null;
    var lineDataVals = [];


    // Load the Visualization API and the corechart package.
    google.charts.load('current', { 'packages': ['corechart'] });

    // Set a callback to run when the Google Visualization API is loaded.
    google.charts.setOnLoadCallback(drawChart);


    var lineOptions = {
        width: '100%',
        height: '100%',
        //legend: { position: 'bottom' },
        trendlines: {
            0: {
                color: 'red',
            },
             1: {
                 color: 'black',
            },
        },
        title: 'District Chart',
        //hAxis: { showTextEvery: 5 },
        vAxes: {
            0: {
                title: 'Revenue',
                gridlines: { color: 'transparent' },
                format: "$#,#",
                //viewWindow: {
                //    max: 4500000,
                //    min: 0
                //},
                ticks: [{v: 0, f: '$0'},
                        {v: 500000, f: '$500k'},
                        {v: 1000000, f: '$1M'},
                        {v: 1500000, f: '$1.5M'},
                        {v: 2000000, f: '$2M'},
                        {v: 2500000, f: '$2.5M'},
                        {v: 3000000, f: '$3M'},
                        {v: 3500000, f: '$3.5M'},
                        {v: 4000000, f: '$4M'},
                        {v: 4500000, f: '$4.5M'},
                        {v: 5000000, f: '$5M'}]
            },
            1: {
                title: 'Percent',
                gridlines: { color: 'transparent' },
                format: "percent",
                    viewWindow: {
                        max:.1,
                        min: 0
                    }
                
            },
        },
        series: {
            0: { targetAxisIndex: 1, type: "bars", },
            1: { targetAxisIndex: 0 },
        },
        colors: ["red", "blue"],
        //chartArea: { left: 100, top: 100, width: 500, height: 150 },

    };


    function drawChart() {

        var callBack = function(d) {

            var massagedData = [];

            massagedData.push(["index", "percent", "revenue"]);
            for (var j = 0; j < d[0].length;) {
                massagedData.push([j++, d[0][j], d[1][j]]);
            }

            var data = google.visualization.arrayToDataTable(massagedData);

            lineObj = {
                data: data,
                options: lineOptions,
            }

            lineObj.chart = new google.visualization.ComboChart(document.getElementById("line_chart_div"));

            drawChartHelper(lineObj);

            $(window).resize(function () {
                drawChartHelper(lineObj);
            });
        };

        InitializePage('MidwestData', callBack, 0);
        }
</script>


<div class="row">
    <div class="col-md-6">
        <h3>District Combo Chart</h3>
        <div class="chart_wrap">
            <div id="line_chart_div" class="chart"></div>
        </div>
    </div>
</div>
